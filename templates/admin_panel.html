<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Dashboard</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link href="/static/styles.css" rel="stylesheet">

</head>

<body>
  <div class="container-fluid">
    <!-- Navbar -->
    <div class="row">
      <nav class="navbar navbar-expand-lg navbar-light bg-light w-100">
        <div class="mx-auto order-0">
          <h1 class="navbar-text text-center mb-0">Stock Predictor</h1>
        </div>
        <div class="collapse navbar-collapse justify-content-end order-3">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item"><a class="navbar-brand" href="">Home</a></li>
            {% if user_logged_in %}
              <li class="nav-item"><a class="nav-link" href="#" id="logoutLink">Logout</a></li>
            {% else %}
              <li class="nav-item"><a class="nav-link" href="#" id="loginLink">Log In</a></li>
            {% endif %}
          </ul>
        </div>
      </nav>
    </div>

    <!-- Left Sidebar -->
    {% if user_logged_in %}
    <div class="left-sidebar">
      <h4>Saved Predictions</h4>
      <div class="saved-predictions">
        <!-- Dynamic saved predictions content -->
      </div>
    </div>
    {% endif %}

    <!-- Main Content Area -->
    <div class="main-content">
      <!-- Loading Spinner -->
      <div class="loading-spinner text-center">
        <div class="spinner-border" role="status">
          <span class="sr-only">Loading...</span>
        </div>
      </div>

      <!-- Add/Update Stock Button -->

      <!-- Registered Users Table -->
      <h3>Registered Users</h3>
      <table id="registeredUsersTable" class="table table-bordered">
        <thead>
          <tr>
            <th>Username</th>
            <th>Email</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="userTableBody">
          <!-- Users will be dynamically loaded here -->
        </tbody>
      </table>

      <!-- Predictions Result Section -->
      <div class="result-section mt-3">
        <div id="result" class="text-center">
          <table class="table table-bordered">
            <thead class="fixed-header">
              <tr>
                <th>Trading Day</th>
                <th>Prediction</th>
              </tr>
            </thead>
            <tbody id="predictionTable" class="scrollable-data">
              <!-- Predictions will be dynamically loaded here -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Right Sidebar -->
    {% if user_logged_in %}
      <div class="right-sidebar">
        <h4>Stock Listed On Nepse</h4>
        <button type="button" class="btn btn-primary" id="updateStock">Add/Update Stock</button>
      
        <div class="listedStocks">
          <table class="table">
            <thead>
              <tr>
                <th>Symbol</th>
                <th>Name</th>
              </tr>
            </thead>
            <tbody id="stockTableBody">
              <!-- Dynamic stock rows will go here -->
            </tbody>
          </table>
        </div>
      </div>    
    {% endif %}
  </div>

  <!-- Logout Confirmation Dialog -->
  <div class="confirmation-dialog" id="confirmationDialog" style="display: none;">
    <div class="confirmation-dialog-content">
      <p>Are you sure you want to log out?</p>
      <button id="confirmLogout" class="btn btn-danger">Yes, Logout</button>
      <button id="cancelLogout" class="btn btn-secondary">Cancel</button>
    </div>
  </div>

  <!-- JavaScript Dependencies -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <!-- Custom JavaScript -->
  <script src="../static/profile.js" defer></script>
  <script src="../static/adminScript.js" defer></script>
</body>

</html>
